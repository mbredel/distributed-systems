# An Apache Thrift example

A quite simple Thrift application comprising a server and a client.

## Compile

The application is written in Java leveraging the Maven build tool. Thus, it is easy to compile the application. All you need is a Java 8 JDK and Maven installed on your system. However, due to the various dependencies within the project, e.g. on code generated by Thrift, the compilation process is slightly more complex and has to follow a certain order. You may compile and package the Thrift application using the following commands:

First compile and package the share library that contains the code generated by Thrift 

```
 $ mvn thrift:compile -am -pl shared
 $ mvn package -am -pl shared
```

Next you can compile the server and the client that depend on the shared library

```
 $ mvn package -am -pl server
 $ mvn package -am -pl client
```

The overall build process is automated using a Makefile that then calls the Maven build tools accordingly. The Makefile support the following targets:

* _all_: To compile the whole systems.
* _clean_: To clean up the system and remove all the compiled files.
* _gen-thrift_: To generate the Thrift-generated source code.
* _shared_: To build the shared library package.
* _server_: To build the server.
* _client_: To build the client.

You may call

```
 $ make
``` 

to build the hole system.

Please also note that you have to generate the Thrift-generated source code in order to modify server and client code in an IDE.

## Usage

Once the system is build, you may start the server by using the bash script, which is located at ./source/src/main/bash/:

```
 $ ./start-thrift-server.sh
```

The server runs forever. You may terminate the server by pressing _Ctrl + x_.


You may start the client by

```
 $ ./start-thrift-client.sh
```
